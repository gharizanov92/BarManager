<div ng-switch="authenticated">
    <div ng-switch-when="true">
        <h2>Users</h2>

        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#registerUserModal" ng-click="clear()">
            </span> Register a new user
        </button>
        <div class="modal fade" id="registerUserModal" tabindex="-1" role="dialog" aria-labelledby="createUserLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <form name="form" role="form" novalidate
                          class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength"
                          ng-submit="create()">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                                    ng-click="clear()">&times;</button>
                            <h4 class="modal-title" id="myFooLabel">Register or edit a user</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label translate="global.form.username">Login</label>
                                <input type="text" class="form-control" name="username" placeholder="{{'global.form.username.placeholder' | translate}}"
                                       ng-model="user.username" ng-minlength=1 ng-maxlength=50 required>
                                <div class="error"
                                     ng-show="form.username.$dirty && form.username.$invalid">
                                    <small class="error"
                                           ng-show="form.username.$error.required" translate="register.messages.validate.username.required">
                                        Your username is required.
                                    </small>
                                    <small class="error"
                                           ng-show="form.username.$error.minlength" translate="register.messages.validate.username.minlength">
                                        Your username is required to be at least 1 character
                                    </small>
                                    <small class="error"
                                           ng-show="form.username.$error.maxlength" translate="register.messages.validate.username.maxlength">
                                        Your username cannot be longer than 50 characters
                                    </small>
                                </div>
                            </div>
                            <div class="form-group">
                                <label translate="global.form.newpassword">New password</label>
                                <input type="password" class="form-control" name="password" placeholder="{{'global.form.newpassword.placeholder' | translate}}"
                                       ng-model="user.password" ng-minlength=5 ng-maxlength=50 required>
                                <div class="error"
                                     ng-show="form.password.$dirty && form.password.$invalid">
                                    <small class="error"
                                           ng-show="form.password.$error.required" translate="global.messages.validate.newpassword.required">
                                        Your password is required.
                                    </small>
                                    <small class="error"
                                           ng-show="form.password.$error.minlength" translate="global.messages.validate.newpassword.minlength">
                                        Your password is required to be at least 5 characters
                                    </small>
                                    <small class="error"
                                           ng-show="form.password.$error.maxlength" translate="global.messages.validate.newpassword.maxlength">
                                        Your password cannot be longer than 50 characters
                                    </small>
                                </div>
                            </div>


                            <div class="form-group">
                                <label translate="settings.form.firstname">First Name</label>
                                <input type="text" class="form-control" name="firstName" placeholder="{{'settings.form.firstname.placeholder' | translate}}"
                                       ng-model="user.firstName" ng-minlength=1 ng-maxlength=50 required>
                                <div class="error"
                                     ng-show="form.firstName.$dirty && form.firstName.$invalid">
                                    <small class="error"
                                           ng-show="form.firstName.$error.required" translate="settings.messages.validate.firstname.required">
                                        Your first name is required.
                                    </small>
                                    <small class="error"
                                           ng-show="form.firstName.$error.minlength" translate="settings.messages.validate.firstname.minlength">
                                        Your first name is required to be at least 1 character
                                    </small>
                                    <small class="error"
                                           ng-show="form.firstName.$error.maxlength" translate="settings.messages.validate.firstname.maxlength">
                                        Your first name cannot be longer than 50 characters
                                    </small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label translate="settings.form.lastname">Last Name</label>
                                <input type="text" class="form-control" name="lastName" placeholder="{{'settings.form.lastname.placeholder' | translate}}"
                                       ng-model="user.lastName" ng-minlength=1 ng-maxlength=50 required>
                                <div class="error"
                                     ng-show="form.lastName.$dirty && form.lastName.$invalid">
                                    <small class="error"
                                           ng-show="form.lastName.$error.required" translate="settings.messages.validate.lastname.required">
                                        Your last name is required.
                                    </small>
                                    <small class="error"
                                           ng-show="form.lastName.$error.minlength" translate="settings.messages.validate.lastname.minlength">
                                        Your last name is required to be at least 1 character
                                    </small>
                                    <small class="error"
                                           ng-show="form.lastName.$error.maxlength" translate="settings.messages.validate.lastname.maxlength">
                                        Your last name cannot be longer than 50 characters
                                    </small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label translate="global.form.email">E-mail</label>
                                <input type="email" class="form-control" name="email" placeholder="{{'global.form.email.placeholder' | translate}}"
                                       ng-model="user.email" ng-minlength=5 ng-maxlength=100>
                                <div class="error"
                                     ng-show="form.email.$dirty && form.email.$invalid">
                                    <small class="error"
                                           ng-show="form.email.$error.required" translate="global.messages.validate.email.required">
                                        Your e-mail is required.
                                    </small>
                                    <small class="error"
                                           ng-show="form.email.$error.email" translate="global.messages.validate.email.invalid">
                                        Your e-mail is invalid.
                                    </small>
                                    <small class="error"
                                           ng-show="form.email.$error.minlength" translate="global.messages.validate.email.minlength">
                                        Your e-mail is required to be at least 5 characters
                                    </small>
                                    <small class="error"
                                           ng-show="form.email.$error.maxlength" translate="global.messages.validate.email.maxlength">
                                        Your e-mail cannot be longer than 100 characters
                                    </small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label translate="global.form.role">Role</label><br/>
                                    <input  type="radio" ng-model="user.role" value="ROLE_BARTENDER" checked="checked">
                                        <span translate="global.form.roles.bartender">Bartender</span><br/>
                                    <input  type="radio" ng-model="user.role" value="ROLE_WAITER">
                                        <span translate="global.form.roles.waiter">Waiter</span><br/>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
                                <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                            </button>
                            <button type="submit" ng-disabled="form.$invalid" class="btn btn-primary">
                                <span class="glyphicon glyphicon-save"></span><span translate="register.form.button">Save</span>
                            </button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>Name</th>
                        <th>Role</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="user in users">
                        <td>{{user.username}}</td>
                        <td>{{user.firstName}} {{user.lastName}}</td>
                        <td>{{user.roleLabel}}</td>
                        <td>
                            <button type="submit"
                                    ng-click="update(user.id)"
                                    class="btn">
                                <span class="glyphicon glyphicon-pencil"></span> Edit
                            </button>
                            <button type="submit"
                                    ng-click="delete(user.id)"
                                    class="btn btn-danger">
                                <span class="glyphicon glyphicon-remove-circle"></span> Delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
